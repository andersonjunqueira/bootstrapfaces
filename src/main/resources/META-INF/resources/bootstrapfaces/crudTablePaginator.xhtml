<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:bf="http://www.neotech.com.br/bootstrapfaces">

<cc:interface componentType="neotech.bootstrapfaces.crudtable">

    <cc:attribute name="headerTitle" required="true" type="java.lang.String"/>
    <cc:attribute name="helpContext" required="false" type="java.lang.String"/>

    <cc:attribute name="pageSizes" required="false" default="10 25 50 100" type="java.lang.String"/>

    <cc:attribute name="value" required="true"/>
    <cc:attribute name="columnClasses" required="false" type="java.lang.String"/>
    <cc:attribute name="theme" required="false" type="java.lang.String" shortDescription="Estilo para o painel. Valor padrão: primary. Valores possíveis: default, primary, danger, success, warning."/>

</cc:interface>
<cc:implementation>
<h:panelGroup id="componente" layout="block">

    <section class="panel panel-#{cc.theme}" role="region">

        <div class="row wrapper">
            <div class="col-xs-7 col-xs-offset-5 col-sm-6 col-sm-offset-6 col-md-5 col-md-offset-7 col-lg-6 col-lg-offset-6 m-b-xs text-right">
                <h:selectOneMenu id="pageSizeSelect" value="#{cc.pageSize}" styleClass="form-control input-sm input-s-md inline v-middle">
                    <f:selectItems value="#{cc.pageSelectorList}" var="ps" itemValue="#{ps}" itemLabel="#{ps}"/>
                </h:selectOneMenu>
                <h:commandLink id="pageSizeDefine" action="#{cc.definePageSize()}" styleClass="btn btn-sm btn-default">
                    <f:ajax execute="pageSizeSelect" render="@this resultset paginator:componente"/>
                    #{comps['framework.crudTable.aplicar']}
                </h:commandLink>
            </div>
        </div>

        <h:panelGroup id="resultset" layout="block">
            <div class="table-responsive">

                <h:dataTable id="table" var="reg" value="#{cc.value}" 
                    styleClass="table table-striped v-middle b-t b-light"
                    columnClasses="#{cc.attrs.columnClasses}"
                    rendered="#{cc.value.size() gt 0}">
                    <cc:insertChildren/>
                </h:dataTable>
                <ui:fragment rendered="#{cc.value.size() eq 0}">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
                            <p><h:outputText value="#{comps['framework.crudTable.nenhumregistro']}"/></p>
                        </div>
                    </div>
                </ui:fragment> 

            </div>
        </h:panelGroup>

        <footer class="panel-footer no-radius">
            <bf:tablePaginator id="paginator" value="#{cc.value}" renderTarget=":#{cc.clientId}:resultset"/>
        </footer>
    </section>

</h:panelGroup>
</cc:implementation>

</ui:composition>